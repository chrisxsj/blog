# gp alter ip

理论上修改ip地址，不影响集群。（注意，初始化集群使用的hostname）

注意事项：

一、有效备份
修改服务器IP地址前应确保数据库有一份有效的最新数据备份，防止修改IP过程中出现不可逆回问题。
有效备份格式选择：
物理备份：恢复周期短，极端情况恢复能力弱。
逻辑备份：恢复周期长，极端情况恢复能力强。

二、系统hosts文件
系统/etc/hosts是数据库集群各节点之间进行数据交互的关键文件，在修改完IP地址后，需要将新IP地址与原hostname进行一一对应。
例如：
10.10.10.1  hgdw1
10.10.10.2  hgdw2
10.10.10.3  hgdw3
修改IP后则为：
20.10.10.10  hgdw1
20.10.10.20  hgdw2
20.10.10.30  hgdw3
注意：该种修改仅限于初始化集群时使用hosts文件方式，如果初始化时使用的为系统IP，则不建议修改服务器IP地址。

三、数据库对外访问配置文件
该文件存在于$ MASTER_DATA_DIRECTORY中，是控制数据库对外访问的配置文件。
注意：如果该文件中已开启所有IP段或所需IP段访问则无需修改。

四、节点互信
启动之前应确保互信是否正常，如果不能自动互信，则需要重做互信。
测试命令：
ssh hgadmin@新IP地址 date